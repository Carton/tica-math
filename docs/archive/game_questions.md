
【分析问题】
请确认或选择以下事项，便于我在下一阶段生成实现方案文档并开工：

- 游戏范围与平台
  - 是否仅支持桌面浏览器，还是需兼容平板/手机触控？是否固定横屏？=》先只考虑桌面浏览器，固定横屏
  - 首发语言是否仅中文，是否需要内置 i18n 结构（后续扩展英文）？=》考虑后续扩展，当前先用中文界面
  - 是否需要离线可玩（Service Worker/缓存）？ =》是的，离线可玩

- 分辨率与缩放
  - 基准分辨率采用 1280×720 是否确认？低端设备帧率目标 30fps 还是 60fps？ =》确认此分辨率，统一目标60fps
  - `ScaleManager` 采用 `FIT + CENTER_BOTH` 已在规格书约定，是否允许在超宽/超高比例下为 UI 设置最小/最大缩放夹紧？ =》可以

- 题目与数学范围
  - 是否只生成整数量级运算？除法是否仅限整除，无小数/分数？是否排除负数与中间运算的非整数结果？=》很好的问题，需要几个 flag 来控制：是否支持分数；是否支持小数；是否支持负数；目前先设置这3个选项。默认都是否，但是最好有可以修改的配置界面
  - 三个数字混合运算是否限定为不带括号的左结合，还是允许固定优先级（乘除先算）？是否允许括号题？ =》允许固定优先级，也允许括号
  - 允许的运算符集合与引入难度阈值：加、减、乘、除各自从多少难度积分开始出现，出现概率曲线如何（线性/阶梯）？=》引入阈值，出现概率曲线可以考虑阶梯
  - 是否允许出题结果为 0 或 1 位数（例如 10-10=0）？最大三位数上限是否固定 999？=》允许0 或1位数；最大3位数上限固定为999

- 策略性错误与“侦探秘籍”
  - 默认内置哪些核心“秘籍”与口诀文案？是否由你提供最终措辞，还是先用我拟定的占位版后续替换？ =》这个可以参考 @docs/CheckCheatsheet.md 里的提示，然后你自己发挥一些；
  - 错误生成策略优先级：尾数偏差、估算级别偏差、奇偶性矛盾、弃九法矛盾、进位/借位陷阱等，是否有禁用项？=》挺好，没有禁用项
  - 单题仅关联一个 `targetSkill` 是否满足后续教学统计？还是允许多标签？ =》允许多个标签

- 计时与节奏
  - 每题基础时间（如 10/12/15 秒）与随难度缩短速率是多少？最低不低于多少秒？ =》你大致给个难度等级可控参数配置项，用来修改难度提升的速率，别的难度提升也可以参考这个
  - 超时判定是否等同答错？是否显示“跳过/不确定”按钮（记为错或不计分）？ =》超时算错
  - 每关固定 10 题是否确认？是否允许在后续版本调整为 15/20 题的配置化？=》这个只用代码内部给个配置选项就可以

- 判题与得分
  - 评分仅依据正确率，还是加上用时加权？等第划分区间是否沿用规格的 80% 成功阈值，还是细化 S/A/B/C？ =》 简单判断正确率，细化 S/A/B/C
  - 连续正确是否有连击奖励或音效反馈？回答过快是否提供额外鼓励（正向音效/特效）？ =》有连击奖励和音效反馈；回答正确有证明音效/特效；错误有负面；然后可以根据回答快慢稍微调整反馈内容

- 道具系统
  - 每关道具 3 次上限是否允许不同种类共享冷却？单题是否允许多次使用道具叠加？ =》3次上限是多种种类共享冷却，而且不是每关有这么多道具，是一共就这么多道具；单题允许道具叠加
  - 三种道具的具体文本提示与视觉引导风格确认：简体中文固定措辞还是后续可配置文本？ =》可配置文本（但是默认用中文）
  - 道具使用是否影响评分（例如使用次数影响评级）？ =》影响

- UI/UX 细节
  - “真相/伪证”按钮是否使用印章风格交互（点击有盖章动画、音效），是否需要键盘快捷键（T/F 或左右箭头）？ =》使用印章风格交互（点击有盖章动画、音效），支持键盘快捷键
  - 倒计时视觉采用燃烧导火索还是复古计时器？若采用导火索，是否需要粒子效果？=》倒计时用燃烧导火索，粒子特效先不加。
  - 题目字体与字号：是否使用等宽字体以便对齐？是否引入特定教育字体（需你提供 TTF/OTF）？ =》你先用个placeholder 字体，然后在最后的资源指导中给出建议用的字体

- 资产与占位
  - 先用 Emoji 作为按钮与道具图标占位是否确认：✅/❌/🔍/⏱️/⚡ 等？背景用纯色或简单纸张纹理占位？ =》可以
  - BGM/SFX：是否先用几段占位音效（点击/盖章/错误/成功）与一条低音量循环 BGM？风格偏卡通还是写实？ =》 可以，风格偏卡通
  - 资源组织：是否采用单一 Texture Atlas（后期再合并），还是先分散图片后再引入打包流程？ =》先分散图片吧

- 数据与持久化
  - 本地存档内容：最高等级、累计徽章、经验值、最近成绩。是否使用 `localStorage` 即可，还是需要云存档接口预留？ =》先用 localStorage
  - 是否需要基础的使用统计/遥测事件（仅本地 console，后续可接入埋点）？=> 可以实现

- 无障碍与可达性
  - 是否需要色盲友好配色与音量独立控制（BGM 和 SFX 分开）？ =》不需要色盲配色，音量统一控制
  - 是否需要在 UI 上提供文本大小缩放选项？=》不需要

- 技术栈与工程
  - Phaser 目标版本确认为 3.90.x；是否可在我这边直接升级 `package.json` 并调整 Vite 配置？ =》 可以
  - 目录结构按规格：`GameScene` 与 `UIScene` 分层渲染，是否同意事件总线（轻量 mitt 或自研）用于跨场景通信？ =》 可以
  - 配置文件：难度曲线采用 `src/game/config/difficulty.json` 是否确认？是否需要热更新（dev 环境动态加载 JSON）？ =》可以；能容易实现热更新的话，就实现

- 测试与质量
  - 单元测试范围：题目生成、难度演进、道具效果判定优先。端到端是否采用 Playwright 进行基础场景流转与可交互性检查（你偏好在单元测试之外也考虑整体与端到端测试 [[memory:7789907]]）？=》可以
  - 覆盖率门槛是否设定（例如语句 70%/分支 60%）？ =》可以

- 发行与版本
  - 是否需要 `vite preview` 的线上构建参数（相对路径、基础路径），以及是否要配置 GitHub Pages/静态托管？=》可以；先不配置GitHub Pages/静态托管

请按你的偏好逐条确认或简单批注“默认即可”的项目，我将据此进入下一阶段。

小提示：我注意到当前依赖为 `phaser@^3.9.0`，与规格“Phaser 3.90.x”不符；且 `vite` 根目录配置为 `src`，但 `src/index.html` 尚未创建。我将在方案阶段补齐入口与场景脚手架，并升级 Phaser。
=》这里我写错了，应该是 3.90.0 版本。

— 
总结
- 已进入【分析问题】，给出玩法/难度/道具/UI/资源/测试/工程等关键决策清单。
- 等你确认后，我会输出 `docs/ImplementationPlan.md` 的详细实现方案（含文件清单、模块职责、事件流、数据结构、资源占位与替换指南），随后开始实现。