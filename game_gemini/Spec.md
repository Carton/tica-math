

* * *

### **游戏规格说明书：【Tica 侦探事务所：数字谜案】**

#### **1. 游戏概述 (Game Overview)**

* **游戏名称:** Tica 侦探事务所：数字谜案 (Tica Detective Agency: The Number Mysteries)

* **核心理念:** 这是一款为8-10岁儿童设计的游戏化学习应用。玩家将扮演小侦探“Tica”，通过快速判断数学等式的正误来“破解案件”，在充满乐趣的侦探故事中，锻炼并掌握多种心算及快速验算的技巧。

* **学习目标:**
  
  1. **核心:** 提升对两位数及三位数加、减、乘、除运算的快速验算能力。
  
  2. **策略:** 引导孩子学习并应用“估算”、“尾数法”、“奇偶性”、“弃九法”等多种高效的验算策略。

* **技术平台:** 网页端 (PC/平板浏览器)，推荐使用 Phaser.js 游戏框架进行开发。

* * *

#### **2. 核心游戏循环 (Core Gameplay Loop)**

玩家的每一次游戏体验都遵循以下循环：

1. **【接取案件】:** 在城市地图上选择一个可玩的“案件”（即关卡）。

2. **【搜集线索】:** 进入关卡后，游戏会连续呈现10道数学计算题（“线索”）。

3. **【判断真伪】:** 针对每一道题，玩家必须在规定时间内点击【真相】(True) 或【伪证】(False) 按钮。

4. **【即时反馈】:** 系统立刻给予生动的声光效反馈，告知判断是否正确。

5. **【使用道具】:** 在遇到困难时，玩家每关可以使用最多3次“侦探工具”。

6. **【案件总结】:** 完成10道题后，进入结算界面，根据正确率和用时进行评级，判断“案件是否告破”。

7. **【获得荣誉】:** 成功破案后，玩家会获得“侦探徽章”和经验值，用于解锁新内容。

* * *

#### **3. 游戏化与主题设计 (Gamification & Thematic Design)**

这是让游戏变得有趣的关键。

**A. 故事背景与角色**

* **世界观:** 在一座名为“算术市 (Arithmos)”的智慧城市里，出现了一个神秘的捣蛋鬼——**“谬误教授” (Professor Malcalc)**。他不会搞破坏，但特别喜欢在城市的各个角落留下看似正确却暗藏错误的数学便签，制造混乱。

* **玩家角色:** 玩家扮演小侦探 **Tica**，她是唯一能快速识破“谬误教授”所有诡计的天才。

**B. 主要界面**

* **主界面 (侦探事务所):**
  
  * **案件地图:** 事务所的墙上挂着一张“算术市”地图。地图上有不同的区域（如“加法街区”、“乘法广场”），每个区域有若干个案件（关卡）等待解锁。
  
  * **侦探手册:** Tica的办案核心。这里收录了您提供的所有【侦探秘籍】。每当游戏引入一种新的验算技巧时（例如，在某个关卡中首次需要用到“尾数追踪术”），这本手册就会解锁新的一页，并用动画和简单的例子进行教学。
  
  * **荣誉墙:** 展示玩家在各个案件中获得的“侦探徽章”，带来满满的成就感。
  
  * **(可选) 衣橱:** 可以用徽章兑换一些简单的外观，比如Tica的不同颜色的侦探帽、风衣或放大镜。

* **关卡界面 (案发现场):**
  
  * **视觉风格:** 模拟一个侦探的调查桌面。
  
  * **线索区域:** 屏幕中央，一张便签纸上写着数学等式，如 `145 + 289 = 434`。
  
  * **判断工具:** 题目下方是两个醒目的印章按钮：绿色的【真相】和红色的【伪证】。
  
  * **倒计时器:** 一个正在燃烧的导火索或者一个复古的计时器，为玩家带来适度的紧迫感。
  
  * **进度条:** 清晰地显示“线索 3/10”，让玩家了解进度。
  
  * **侦探工具箱:** 屏幕一角放置着3个道具的图标。

**C. 反馈与激励**

* **即时反馈:**
  
  * **正确:** 玩家点击【真相】（当等式正确时），屏幕上会盖下一个大大的“证据确凿”的印章，伴随清脆的“咔哒”声，题目变绿。
  
  * **错误:** 玩家点击了错误选项，屏幕会浮现“这是伪证！”的红色字样，便签纸被划掉，并伴有“唰”的划纸声。

* **关卡结算:**
  
  * **成功 (正确率 ≥ 80%):** 出现“案件告破！”的庆祝动画，Tica将“谬误教授”的头像贴在破案板上，并颁发徽章。
  
  * **失败 (正确率 < 80%):** 出现“让教授逃跑了！”的动画，并鼓励“Tica侦探，整理线索，我们再来一次！”。

* * *

#### **4. 关卡设计与题目生成 (Level Design & Content Generation)**

这是游戏的核心学习部分，必须做到**循序渐进**和**目标明确**。

**A. 关卡结构 (案件)**

关卡的设计要与“侦探手册”中的秘籍解锁相对应。

* **第一区：新手大道 (案件 1-5)**
  
  * **教学目标:** 掌握 **估算神功** 和 **尾数追踪术**。
  
  * **题目范围:** 两位数的加减法。
  
  * **出题设计:** 错误的等式会故意在“估算”或“尾数”上出现明显破绽。
    
    * 例 (尾数错误): `34 + 52 = 85` (正确尾数应为6)
    
    * 例 (估算错误): `21 + 22 = 83` (正确答案在40左右)

* **第二区：商业中心 (案件 6-10)**
  
  * **教学目标:** 掌握 **奇偶密码** 和 **特殊数字指纹 (5, 10, 11)**。
  
  * **题目范围:** 三位数加减法，两位数与一位数/特殊数(10, 11)的乘法。
  
  * **出题设计:** 错误等式的设计将围绕奇偶性和特殊数字规律。
    
    * 例 (奇偶错误): `13 + 15 = 29` (奇+奇=偶，答案应为偶数)
    
    * 例 (特殊数错误): `35 x 11 = 380` (正确应为385)

* **第三区：智慧高塔 (案件 11-15)**
  
  * **教学目标:** 掌握 **弃九验算法** 和 **逆运算大法**。
  
  * **题目范围:** 复杂的两位数乘法，简单的除法。
  
  * **出题设计:** 错误等式更具迷惑性，需要更高级的技巧来识破。
    
    * 例 (弃九法错误): `123 + 456 = 580` (弃九后：6+6=12->3, 5+8+0=13->4，3≠4)
    
    * 例 (逆运算错误): `150 / 6 = 24` (用乘法逆运算 24*6 = 144 ≠ 150)

**B. 题目生成逻辑 (Code Agent 注意)**

* **模块化:** `QuestionGenerator` 必须是一个独立的模块，与游戏主循环解耦。

* **生成流程:**
  
  1. 根据当前关卡ID，确定难度范围（如：两位数加法）和考察的“秘籍”（如：“尾数法”）。
  
  2. 随机生成一个**正确**的等式。
  
  3. 50%的概率直接使用这个正确等式作为题目。
  
  4. 50%的概率需要制造一个**错误**等式。制造错误时，**必须有策略性**：
     
     * **非随机错误:** 不要随机生成一个数字，而是根据本关考察的“秘籍”来制造“高仿真伪证”。
     
     * **举例:** 若考察“尾数法”，正确答案是 `22+33=55`，则错误的题目应为 `22+33=54` 或 `22+33=56`，而不是 `22+33=999`。

* **数据结构:** 生成的每个题目对象应包含：
  
  * `questionString`: "22 + 33 = 54"
  
  * `isTrue`: `false`
  
  * `targetSkill`: "尾数追踪术" _(这个字段至关重要，用于关联道具提示)_

* * *

#### **5. 侦探道具系统 (Detective Tools System)**

每关可使用3次道具（可以是同一种用3次，也可以是每种用1次）。道具的设计核心是**“启发思路，而非给出答案”**。

1. **真相放大镜 (Magnifying Glass of Truth)**
   
   * **效果:** 点击使用后，游戏会根据题目的 `targetSkill` 字段，给出动态视觉提示和文字口诀。
   
   * **举例:**
     
     * 如果 `targetSkill` 是“尾数追踪术”，放大镜会在所有数字的**个位数**上画一个圈，并显示口诀：“别管前面多复杂，先看尾巴抓一抓！”
     
     * 如果 `targetSkill` 是“估算神功”，它会在题目上方显示约等于的数字，如 `98 + 199` 上方显示 `(约100) + (约200)`，并显示口诀。

2. **时间慢走怀表 (Time-Slowing Pocket Watch)**
   
   * **效果:** 最直接的辅助。使用后，当前这道题的倒计时器立刻增加10秒。

3. **思维闪电 (Flash of Insight)**
   
   * **效果:** 提供一个聚焦问题核心的“是/非”提示。它不会告诉玩家这道题是对是错，但会验证一个关键环节。
   
   * **举例:** 对于题目 `123 + 457 = 581`，使用此道具后，会弹出一个提示：“Tica灵光一闪：这道题的答案，奇偶性是**正确**的！”（因为奇+奇=偶，而581是奇数，所以这句话本身是个“伪证”，孩子需要再思考一步）。或者更直接一点：“Tica灵光一闪：这道题的**尾数**计算是**错误**的！”。这能极大地引导孩子的思考方向。

* * *


