<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tica ä¾¦æ¢äº‹åŠ¡æ‰€ï¼šæ•°å­—è°œæ¡ˆ</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#0b1021" />
  </head>
  <body style="margin:0;background:#0b1021;color:#fff;">
    <div id="game"></div>
    <script type="module" src="./main.ts"></script>

    <!-- å¼€å‘ç¯å¢ƒè°ƒè¯•é¢æ¿ -->
    <div id="debug-panel" style="display:none; position:fixed; top:10px; right:10px; background:rgba(0,0,0,0.8); color:white; padding:15px; border-radius:8px; font-family:monospace; font-size:12px; z-index:9999; min-width:200px;">
      <h4 style="margin:0 0 10px 0; color:#4CAF50;">ğŸ® æ¸¸æˆè°ƒè¯•é¢æ¿</h4>
      <div style="margin-bottom:10px;">
        <label style="display:block; margin-bottom:5px;">è®¾ç½®å…³å¡:</label>
        <input type="number" id="debug-level" value="1" min="1" max="100" style="width:100%; padding:5px;">
        <button onclick="applyDebugLevel()" style="width:100%; margin-top:5px; padding:5px; background:#4CAF50; color:white; border:none; border-radius:3px; cursor:pointer;">åº”ç”¨</button>
      </div>
            <div style="margin-bottom:10px;">
        <button onclick="resetDebugGame()" style="width:100%; padding:5px; background:#f44336; color:white; border:none; border-radius:3px; cursor:pointer;">é‡ç½®æ¸¸æˆ</button>
      </div>
      <div>
        <button onclick="toggleDebugPanel()" style="width:100%; padding:5px; background:#666; color:white; border:none; border-radius:3px; cursor:pointer;">éšè—é¢æ¿</button>
      </div>
    </div>

    <script>
      // è°ƒè¯•é¢æ¿åŠŸèƒ½
      function applyDebugLevel() {
        const level = parseInt(document.getElementById('debug-level').value);
        if (window.DebugHelper && window.DebugHelper.setLevel(level)) {
          setTimeout(() => window.location.reload(), 100);
        }
      }

      // addDebugToolså·²ç§»é™¤ - è°ƒè¯•æ¨¡å¼ä¸‹é“å…·æ— é™

      function resetDebugGame() {
        if (confirm('ç¡®å®šè¦é‡ç½®æ¸¸æˆå—ï¼Ÿ')) {
          if (window.DebugHelper && window.DebugHelper.resetGame()) {
            setTimeout(() => window.location.reload(), 100);
          }
        }
      }

      function toggleDebugPanel() {
        const panel = document.getElementById('debug-panel');
        panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
      }

      // å¼€å‘ç¯å¢ƒè‡ªåŠ¨æ˜¾ç¤ºè°ƒè¯•é¢æ¿
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        document.getElementById('debug-panel').style.display = 'block';
      }

      // å¿«æ·é”®æ”¯æŒ
      document.addEventListener('keydown', (e) => {
        // Ctrl+Shift+D åˆ‡æ¢è°ƒè¯•é¢æ¿
        if (e.ctrlKey && e.shiftKey && e.key === 'D') {
          e.preventDefault();
          toggleDebugPanel();
        }
        // Ctrl+Shift+L å¿«é€Ÿè®¾ç½®å…³å¡
        if (e.ctrlKey && e.shiftKey && e.key === 'L') {
          e.preventDefault();
          const level = prompt('è¾“å…¥å…³å¡æ•° (1-100):');
          if (level && !isNaN(level)) {
            document.getElementById('debug-level').value = parseInt(level);
            applyDebugLevel();
          }
        }
      });
    </script>
  </body>
</html>
